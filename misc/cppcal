#define N (M==2?!(Y%4||!(Y%100)&&Y%400):(M|2)==6||(M&9)==9?2:3)
#define W (Y+(Y-(M<3))/4-(Y-(M<3))/100+(Y-(M<3))/400+(13*M+3)/5+3*(M<3)-(M<2))%7
Su Mo Tu We Th Fr Sa
#if (W==6)
__ _1 _2 _3 _4 _5 _6
_7 _8 _9 10 11 12 13
14 15 16 17 18 19 20
21 22 23 24 25 26 27
#if (N==0)
28
#elif (N==1)
28 29
#elif (N==2)
28 29 30
#else
28 29 30 31
#endif
#elif (W==0)
__ __ _1 _2 _3 _4 _5
_6 _7 _8 _9 10 11 12
13 14 15 16 17 18 19
20 21 22 23 24 25 26
#if (N==0)
27 28
#elif (N==1)
27 28 29
#elif (N==2)
27 28 29 30
#else
27 28 29 30 31
#endif
#elif (W==1)
__ __ __ _1 _2 _3 _4
_5 _6 _7 _8 _9 10 11
12 13 14 15 16 17 18
19 20 21 22 23 24 25
#if (N==0)
26 27 28
#elif (N==1)
26 27 28 29
#elif (N==2)
26 27 28 29 30
#else
26 27 28 29 30 31
#endif
#elif (W==2)
__ __ __ __ _1 _2 _3
_4 _5 _6 _7 _8 _9 10
11 12 13 14 15 16 17
18 19 20 21 22 23 24
#if (N==0)
25 26 27 28
#elif (N==1)
25 26 27 28 29
#elif (N==2)
25 26 27 28 29 30
#else
25 26 27 28 29 30 31
#endif
#elif (W==3)
__ __ __ __ __ _1 _2
_3 _4 _5 _6 _7 _8 _9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
#if (N==0)
24 25 26 27 28
#elif (N==1)
24 25 26 27 28 29
#elif (N==2)
24 25 26 27 28 29 30
#else
24 25 26 27 28 29 30
31
#endif
#elif (W==4)
__ __ __ __ __ __ _1
_2 _3 _4 _5 _6 _7 _8
_9 10 11 12 13 14 15
16 17 18 19 20 21 22
#if (N==0)
23 24 25 26 27 28
#elif (N==1)
23 24 25 26 27 28 29
#elif (N==2)
23 24 25 26 27 28 29
30
#else
23 24 25 26 27 28 29
30 31
#endif
#else
_1 _2 _3 _4 _5 _6 _7
_8 _9 10 11 12 13 14
15 16 17 18 19 20 21
22 23 24 25 26 27 28
#if (N==1)
29
#elif (N==2)
29 30
#elif (N==3)
29 30 31
#endif
#endif
